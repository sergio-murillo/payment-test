{
	"info": {
		"_postman_id": "payments-api",
		"name": "Payments API",
		"description": "Colección completa de endpoints para la API de Payments.\n\n## Flujo de uso recomendado\n1. **Get All Products** → ver productos disponibles\n2. **Create Transaction** → crear transacción (guarda automáticamente el `transaction_id`)\n3. **Process Payment** → procesar pago (usa el `transaction_id` guardado)\n4. **Get Transaction by ID** → verificar estado de la transacción\n5. **Get All Inventory** → verificar que el stock se actualizó\n6. **Get All Events** → auditar eventos generados",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
		"_exporter_id": "payments"
	},
	"item": [
		{
			"name": "Products",
			"item": [
				{
					"name": "Get All Products",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"url": {
							"raw": "{{base_url}}/products",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"products"
							]
						},
						"description": "Obtiene todos los productos disponibles en el inventario. Incluye información de stock disponible."
					},
					"response": [
						{
							"name": "Success Response",
							"originalRequest": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{base_url}}/products",
									"host": [
										"{{base_url}}"
									],
									"path": [
										"products"
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json"
								}
							],
							"cookie": [],
							"body": "{\n    \"success\": true,\n    \"data\": [\n        {\n            \"id\": \"prod-001\",\n            \"name\": \"iPhone 15 Pro\",\n            \"description\": \"Latest iPhone with advanced features\",\n            \"price\": 4500000,\n            \"imageUrl\": \"https://via.placeholder.com/300x300?text=iPhone+15+Pro\",\n            \"categoria\": \"Electrónica\",\n            \"metadata\": {\n                \"marca\": \"Apple\",\n                \"modelo\": \"iPhone 15 Pro\",\n                \"color\": \"Natural Titanium\"\n            },\n            \"rating\": 4.5,\n            \"stock\": 50,\n            \"createdAt\": \"2024-01-01T00:00:00.000Z\",\n            \"updatedAt\": \"2024-01-01T00:00:00.000Z\"\n        }\n    ]\n}"
						}
					]
				},
				{
					"name": "Get Product by ID",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"url": {
							"raw": "{{base_url}}/products/{{product_id}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"products",
								"{{product_id}}"
							]
						},
						"description": "Obtiene un producto específico por su ID. Incluye información de stock disponible."
					},
					"response": [
						{
							"name": "Success Response",
							"originalRequest": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{base_url}}/products/prod-001",
									"host": [
										"{{base_url}}"
									],
									"path": [
										"products",
										"prod-001"
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json"
								}
							],
							"cookie": [],
							"body": "{\n    \"success\": true,\n    \"data\": {\n        \"id\": \"prod-001\",\n        \"name\": \"iPhone 15 Pro\",\n        \"description\": \"Latest iPhone with advanced features\",\n        \"price\": 4500000,\n        \"imageUrl\": \"https://via.placeholder.com/300x300?text=iPhone+15+Pro\",\n        \"categoria\": \"Electrónica\",\n        \"metadata\": {\n            \"marca\": \"Apple\",\n            \"modelo\": \"iPhone 15 Pro\",\n            \"color\": \"Natural Titanium\"\n        },\n        \"rating\": 4.5,\n        \"stock\": 50,\n        \"createdAt\": \"2024-01-01T00:00:00.000Z\",\n        \"updatedAt\": \"2024-01-01T00:00:00.000Z\"\n    }\n}"
						},
						{
							"name": "Not Found",
							"originalRequest": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{base_url}}/products/prod-999",
									"host": [
										"{{base_url}}"
									],
									"path": [
										"products",
										"prod-999"
									]
								}
							},
							"status": "Not Found",
							"code": 404,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json"
								}
							],
							"cookie": [],
							"body": "{\n    \"statusCode\": 404,\n    \"message\": \"Product not found\",\n    \"error\": \"Not Found\"\n}"
						}
					]
				}
			],
			"description": "Endpoints para gestionar productos"
		},
		{
			"name": "Transactions",
			"item": [
				{
					"name": "Create Transaction",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"// Generar idempotency key único",
									"pm.variables.set('idempotency_key', pm.variables.replaceIn('{{$randomUUID}}'));"
								],
								"type": "text/javascript"
							}
						},
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Transaction created successfully', function () {",
									"    pm.response.to.have.status(201);",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.success).to.eql(true);",
									"    pm.expect(jsonData.data).to.have.property('id');",
									"    pm.expect(jsonData.data.status).to.eql('PENDING');",
									"});",
									"",
									"// Guardar transaction_id para usar en requests posteriores",
									"var jsonData = pm.response.json();",
									"if (jsonData.success && jsonData.data && jsonData.data.id) {",
									"    pm.environment.set('transaction_id', jsonData.data.id);",
									"    console.log('Transaction ID saved: ' + jsonData.data.id);",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"productId\": \"{{product_id}}\",\n    \"amount\": 4500000,\n    \"commission\": 135000,\n    \"shippingCost\": 15000,\n    \"customerEmail\": \"cliente@ejemplo.com\",\n    \"customerName\": \"Juan Pérez\",\n    \"deliveryAddress\": \"Calle 123 #45-67\",\n    \"deliveryCity\": \"Bogotá\",\n    \"deliveryPhone\": \"+57 300 123 4567\",\n    \"idempotencyKey\": \"{{idempotency_key}}\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/transactions",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"transactions"
							]
						},
						"description": "Crea una nueva transacción en estado PENDING. El idempotencyKey garantiza que no se dupliquen transacciones.\n\n**Nota:** El `transaction_id` se guarda automáticamente en las variables de entorno para uso en requests posteriores."
					},
					"response": [
						{
							"name": "Success Response",
							"originalRequest": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"productId\": \"prod-001\",\n    \"amount\": 4500000,\n    \"commission\": 135000,\n    \"shippingCost\": 15000,\n    \"customerEmail\": \"cliente@ejemplo.com\",\n    \"customerName\": \"Juan Pérez\",\n    \"deliveryAddress\": \"Calle 123 #45-67\",\n    \"deliveryCity\": \"Bogotá\",\n    \"deliveryPhone\": \"+57 300 123 4567\",\n    \"idempotencyKey\": \"550e8400-e29b-41d4-a716-446655440000\"\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{base_url}}/transactions",
									"host": [
										"{{base_url}}"
									],
									"path": [
										"transactions"
									]
								}
							},
							"status": "Created",
							"code": 201,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json"
								}
							],
							"cookie": [],
							"body": "{\n    \"success\": true,\n    \"data\": {\n        \"id\": \"trans-123\",\n        \"productId\": \"prod-001\",\n        \"amount\": 4500000,\n        \"commission\": 135000,\n        \"shippingCost\": 15000,\n        \"totalAmount\": 4650000,\n        \"status\": \"PENDING\",\n        \"customerEmail\": \"cliente@ejemplo.com\",\n        \"customerName\": \"Juan Pérez\",\n        \"deliveryAddress\": \"Calle 123 #45-67\",\n        \"deliveryCity\": \"Bogotá\",\n        \"deliveryPhone\": \"+57 300 123 4567\",\n        \"idempotencyKey\": \"550e8400-e29b-41d4-a716-446655440000\",\n        \"createdAt\": \"2024-01-01T12:00:00.000Z\",\n        \"updatedAt\": \"2024-01-01T12:00:00.000Z\"\n    }\n}"
						},
						{
							"name": "Validation Error",
							"originalRequest": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"productId\": \"prod-001\",\n    \"amount\": -1000\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{base_url}}/transactions",
									"host": [
										"{{base_url}}"
									],
									"path": [
										"transactions"
									]
								}
							},
							"status": "Bad Request",
							"code": 400,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json"
								}
							],
							"cookie": [],
							"body": "{\n    \"statusCode\": 400,\n    \"message\": [\n        \"amount must not be less than 0\",\n        \"commission should not be empty\",\n        \"customerEmail must be an email\"\n    ],\n    \"error\": \"Bad Request\"\n}"
						}
					]
				},
				{
					"name": "Get Transaction by ID",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Transaction retrieved successfully', function () {",
									"    pm.response.to.have.status(200);",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.success).to.eql(true);",
									"    pm.expect(jsonData.data).to.have.property('id');",
									"    pm.expect(jsonData.data).to.have.property('status');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"url": {
							"raw": "{{base_url}}/transactions/{{transaction_id}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"transactions",
								"{{transaction_id}}"
							]
						},
						"description": "Obtiene una transacción específica por su ID. Útil para verificar el estado del pago.\n\n**Nota:** Usa automáticamente el `transaction_id` guardado por 'Create Transaction'."
					},
					"response": [
						{
							"name": "Success Response - PENDING",
							"originalRequest": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{base_url}}/transactions/{{transaction_id}}",
									"host": [
										"{{base_url}}"
									],
									"path": [
										"transactions",
										"{{transaction_id}}"
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json"
								}
							],
							"cookie": [],
							"body": "{\n    \"success\": true,\n    \"data\": {\n        \"id\": \"trans-123\",\n        \"productId\": \"prod-001\",\n        \"amount\": 4500000,\n        \"commission\": 135000,\n        \"shippingCost\": 15000,\n        \"totalAmount\": 4650000,\n        \"status\": \"PENDING\",\n        \"customerEmail\": \"cliente@ejemplo.com\",\n        \"customerName\": \"Juan Pérez\",\n        \"deliveryAddress\": \"Calle 123 #45-67\",\n        \"deliveryCity\": \"Bogotá\",\n        \"deliveryPhone\": \"+57 300 123 4567\",\n        \"idempotencyKey\": \"550e8400-e29b-41d4-a716-446655440000\",\n        \"createdAt\": \"2024-01-01T12:00:00.000Z\",\n        \"updatedAt\": \"2024-01-01T12:00:00.000Z\"\n    }\n}"
						},
						{
							"name": "Success Response - APPROVED",
							"originalRequest": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{base_url}}/transactions/{{transaction_id}}",
									"host": [
										"{{base_url}}"
									],
									"path": [
										"transactions",
										"{{transaction_id}}"
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json"
								}
							],
							"cookie": [],
							"body": "{\n    \"success\": true,\n    \"data\": {\n        \"id\": \"trans-123\",\n        \"productId\": \"prod-001\",\n        \"amount\": 4500000,\n        \"commission\": 135000,\n        \"shippingCost\": 15000,\n        \"totalAmount\": 4650000,\n        \"status\": \"APPROVED\",\n        \"customerEmail\": \"cliente@ejemplo.com\",\n        \"customerName\": \"Juan Pérez\",\n        \"deliveryAddress\": \"Calle 123 #45-67\",\n        \"deliveryCity\": \"Bogotá\",\n        \"deliveryPhone\": \"+57 300 123 4567\",\n        \"gatewayTransactionId\": \"gateway_123456789\",\n        \"idempotencyKey\": \"550e8400-e29b-41d4-a716-446655440000\",\n        \"createdAt\": \"2024-01-01T12:00:00.000Z\",\n        \"updatedAt\": \"2024-01-01T12:05:00.000Z\"\n    }\n}"
						},
						{
							"name": "Not Found",
							"originalRequest": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{base_url}}/transactions/trans-999",
									"host": [
										"{{base_url}}"
									],
									"path": [
										"transactions",
										"trans-999"
									]
								}
							},
							"status": "Not Found",
							"code": 404,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json"
								}
							],
							"cookie": [],
							"body": "{\n    \"statusCode\": 404,\n    \"message\": \"Transaction not found\",\n    \"error\": \"Not Found\"\n}"
						}
					]
				},
				{
					"name": "Get All Transactions",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Transactions retrieved successfully', function () {",
									"    pm.response.to.have.status(200);",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.success).to.eql(true);",
									"    pm.expect(jsonData.data).to.be.an('array');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"url": {
							"raw": "{{base_url}}/transactions",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"transactions"
							]
						},
						"description": "Obtiene todas las transacciones del sistema. Endpoint administrativo para monitoreo."
					},
					"response": [
						{
							"name": "Success Response",
							"originalRequest": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{base_url}}/transactions",
									"host": [
										"{{base_url}}"
									],
									"path": [
										"transactions"
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json"
								}
							],
							"cookie": [],
							"body": "{\n    \"success\": true,\n    \"data\": [\n        {\n            \"id\": \"trans-123\",\n            \"productId\": \"prod-001\",\n            \"amount\": 4500000,\n            \"commission\": 135000,\n            \"shippingCost\": 15000,\n            \"totalAmount\": 4650000,\n            \"status\": \"APPROVED\",\n            \"customerEmail\": \"cliente@ejemplo.com\",\n            \"customerName\": \"Juan Pérez\",\n            \"deliveryAddress\": \"Calle 123 #45-67\",\n            \"deliveryCity\": \"Bogotá\",\n            \"deliveryPhone\": \"+57 300 123 4567\",\n            \"gatewayTransactionId\": \"gateway_123456789\",\n            \"idempotencyKey\": \"550e8400-e29b-41d4-a716-446655440000\",\n            \"createdAt\": \"2024-01-01T12:00:00.000Z\",\n            \"updatedAt\": \"2024-01-01T12:05:00.000Z\"\n        }\n    ]\n}"
						}
					]
				}
			],
			"description": "Endpoints para gestionar transacciones"
		},
		{
			"name": "Payments",
			"item": [
				{
					"name": "Process Payment",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Payment processed successfully', function () {",
									"    pm.response.to.have.status(200);",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.success).to.eql(true);",
									"    pm.expect(jsonData.data).to.have.property('transactionId');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"transactionId\": \"{{transaction_id}}\",\n    \"cardNumber\": \"4242424242424242\",\n    \"cvc\": \"123\",\n    \"expMonth\": \"08\",\n    \"expYear\": \"28\",\n    \"cardHolder\": \"JOSÉ PÉREZ\",\n    \"installments\": 1\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/payments/process",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"payments",
								"process"
							]
						},
						"description": "Procesa un pago con tokenización segura de tarjeta. El flujo es:\n1. Tokeniza la tarjeta con la pasarela de pagos\n2. Inicia el workflow de Step Functions (o ejecución directa en desarrollo)\n3. El workflow procesa el pago, actualiza inventario y completa la transacción\n\n**Nota:** Usa automáticamente el `transaction_id` guardado por 'Create Transaction'.\n\n**Tarjetas de prueba Sandbox:**\n- `4242424242424242` → APPROVED\n- `4111111111111111` → DECLINED\n- `4012888888881881` → PENDING"
					},
					"response": [
						{
							"name": "Success - Step Functions (producción)",
							"originalRequest": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"transactionId\": \"{{transaction_id}}\",\n    \"cardNumber\": \"4242424242424242\",\n    \"cvc\": \"123\",\n    \"expMonth\": \"08\",\n    \"expYear\": \"28\",\n    \"cardHolder\": \"JOSÉ PÉREZ\",\n    \"installments\": 1\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{base_url}}/payments/process",
									"host": [
										"{{base_url}}"
									],
									"path": [
										"payments",
										"process"
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json"
								}
							],
							"cookie": [],
							"body": "{\n    \"success\": true,\n    \"data\": {\n        \"executionArn\": \"arn:aws:states:us-east-1:123456789012:execution:PaymentProcessor-dev:exec-abc123\",\n        \"transactionId\": \"trans-123\"\n    }\n}"
						},
						{
							"name": "Success - Direct Execution (desarrollo)",
							"originalRequest": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"transactionId\": \"{{transaction_id}}\",\n    \"cardNumber\": \"4242424242424242\",\n    \"cvc\": \"123\",\n    \"expMonth\": \"08\",\n    \"expYear\": \"28\",\n    \"cardHolder\": \"JOSÉ PÉREZ\",\n    \"installments\": 1\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{base_url}}/payments/process",
									"host": [
										"{{base_url}}"
									],
									"path": [
										"payments",
										"process"
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json"
								}
							],
							"cookie": [],
							"body": "{\n    \"success\": true,\n    \"data\": {\n        \"transactionId\": \"trans-123\",\n        \"executedDirectly\": true,\n        \"transaction\": {\n            \"id\": \"trans-123\",\n            \"status\": \"APPROVED\",\n            \"gatewayTransactionId\": \"gateway_123456789\"\n        },\n        \"gatewayResponse\": {\n            \"id\": \"gateway_123456789\",\n            \"status\": \"APPROVED\",\n            \"amount_in_cents\": 465000000,\n            \"currency\": \"COP\",\n            \"customer_email\": \"cliente@ejemplo.com\",\n            \"payment_method_type\": \"CARD\",\n            \"reference\": \"trans-123\"\n        }\n    }\n}"
						},
						{
							"name": "Transaction Not Found",
							"originalRequest": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"transactionId\": \"trans-999\",\n    \"cardNumber\": \"4242424242424242\",\n    \"cvc\": \"123\",\n    \"expMonth\": \"08\",\n    \"expYear\": \"28\",\n    \"cardHolder\": \"JOSÉ PÉREZ\",\n    \"installments\": 1\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{base_url}}/payments/process",
									"host": [
										"{{base_url}}"
									],
									"path": [
										"payments",
										"process"
									]
								}
							},
							"status": "Internal Server Error",
							"code": 500,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json"
								}
							],
							"cookie": [],
							"body": "{\n    \"statusCode\": 500,\n    \"message\": \"Transaction not found\",\n    \"error\": \"Internal Server Error\"\n}"
						},
						{
							"name": "Validation Error",
							"originalRequest": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"transactionId\": \"\",\n    \"cardNumber\": \"123\",\n    \"cvc\": \"\",\n    \"expMonth\": \"13\",\n    \"expYear\": \"\",\n    \"cardHolder\": \"\",\n    \"installments\": 0\n}",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "{{base_url}}/payments/process",
									"host": [
										"{{base_url}}"
									],
									"path": [
										"payments",
										"process"
									]
								}
							},
							"status": "Bad Request",
							"code": 400,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json"
								}
							],
							"cookie": [],
							"body": "{\n    \"statusCode\": 400,\n    \"message\": [\n        \"transactionId should not be empty\",\n        \"Card number must be between 13 and 19 digits\",\n        \"CVC must be 3 or 4 digits\",\n        \"cvc should not be empty\",\n        \"Expiration month must be between 01 and 12\",\n        \"Expiration year must be 2 digits\",\n        \"expYear should not be empty\",\n        \"cardHolder should not be empty\",\n        \"installments must not be less than 1\"\n    ],\n    \"error\": \"Bad Request\"\n}"
						}
					]
				}
			],
			"description": "Endpoints para procesar pagos con la pasarela de pagos"
		},
		{
			"name": "Inventory",
			"item": [
				{
					"name": "Get All Inventory",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Inventory retrieved successfully', function () {",
									"    pm.response.to.have.status(200);",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.success).to.eql(true);",
									"    pm.expect(jsonData.data).to.be.an('array');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"url": {
							"raw": "{{base_url}}/inventory",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"inventory"
							]
						},
						"description": "Obtiene todo el inventario del sistema. Endpoint administrativo para monitoreo."
					},
					"response": [
						{
							"name": "Success Response",
							"originalRequest": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{base_url}}/inventory",
									"host": [
										"{{base_url}}"
									],
									"path": [
										"inventory"
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json"
								}
							],
							"cookie": [],
							"body": "{\n    \"success\": true,\n    \"data\": [\n        {\n            \"productId\": \"prod-001\",\n            \"quantity\": 100,\n            \"reservedQuantity\": 10,\n            \"updatedAt\": \"2024-01-01T00:00:00.000Z\"\n        },\n        {\n            \"productId\": \"prod-002\",\n            \"quantity\": 50,\n            \"reservedQuantity\": 5,\n            \"updatedAt\": \"2024-01-01T00:00:00.000Z\"\n        }\n    ]\n}"
						}
					]
				}
			],
			"description": "Endpoints administrativos para gestionar inventario"
		},
		{
			"name": "Event Store",
			"item": [
				{
					"name": "Get All Events",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"pm.test('Events retrieved successfully', function () {",
									"    pm.response.to.have.status(200);",
									"    var jsonData = pm.response.json();",
									"    pm.expect(jsonData.success).to.eql(true);",
									"    pm.expect(jsonData.data).to.be.an('array');",
									"});"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"url": {
							"raw": "{{base_url}}/event-store",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"event-store"
							]
						},
						"description": "Obtiene todos los eventos del event store. Endpoint administrativo para auditoría y monitoreo."
					},
					"response": [
						{
							"name": "Success Response",
							"originalRequest": {
								"method": "GET",
								"header": [],
								"url": {
									"raw": "{{base_url}}/event-store",
									"host": [
										"{{base_url}}"
									],
									"path": [
										"event-store"
									]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json"
								}
							],
							"cookie": [],
							"body": "{\n    \"success\": true,\n    \"data\": [\n        {\n            \"id\": \"evt-001\",\n            \"aggregateId\": \"trans-123\",\n            \"eventType\": \"TransactionCreated\",\n            \"eventData\": {\n                \"id\": \"trans-123\",\n                \"status\": \"PENDING\",\n                \"productId\": \"prod-001\"\n            },\n            \"timestamp\": \"2024-01-01T12:00:00.000Z\",\n            \"eventTimestamp\": 1704067200000\n        },\n        {\n            \"id\": \"evt-002\",\n            \"aggregateId\": \"trans-123\",\n            \"eventType\": \"PaymentProcessed\",\n            \"eventData\": {\n                \"id\": \"trans-123\",\n                \"status\": \"APPROVED\",\n                \"gatewayTransactionId\": \"gateway_123456789\"\n            },\n            \"timestamp\": \"2024-01-01T12:05:00.000Z\",\n            \"eventTimestamp\": 1704067500000\n        }\n    ]\n}"
						}
					]
				}
			],
			"description": "Endpoints administrativos para consultar el event store"
		}
	],
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		}
	],
	"variable": [
		{
			"key": "base_url",
			"value": "http://localhost:3001",
			"type": "string"
		},
		{
			"key": "idempotency_key",
			"value": "",
			"type": "string"
		},
		{
			"key": "transaction_id",
			"value": "",
			"type": "string"
		},
		{
			"key": "product_id",
			"value": "prod-001",
			"type": "string"
		}
	]
}
